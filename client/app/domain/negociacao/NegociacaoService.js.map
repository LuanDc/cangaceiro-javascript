{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obtemNegociacoesDaSemana","get","then","dados","map","objeto","Date","data","quantidade","valor","err","Error","obtemNegociacoesDaSemanaAnterior","obtemNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","periodo","Promise","all","reduce","novoArray","item","concat","sort","a","b","getTime","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,uB,sBAAAA,W;;AACAC,sB,iBAAAA,U;;;AAEF,kBAAMC,iBAAN,CAAwB;;AAE3BC,8BAAc;;AAEV,yBAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACH;;AAEDK,2CAA2B;;AAEvB,2BAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EACFC,IADE,CAECC,SAASA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CAFV,EAICC,OAAO;;AAEH,8BAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN;AACH,qBAPF,CAAP;AASH;;AAEDC,mDAAmC;;AAE/B,2BAAO,KAAKb,KAAL,CAAWE,GAAX,CAAe,sBAAf,EACFC,IADE,CAECC,SAASA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CAFV,EAICC,OAAO;;AAEH,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBAPF,CAAP;AASH;;AAEDE,oDAAoC;;AAEhC,2BAAO,KAAKd,KAAL,CAAWE,GAAX,CAAe,uBAAf,EACFC,IADE,CAECC,SAASA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAf,EAAsCF,OAAOG,UAA7C,EAAyDH,OAAOI,KAAhE,CAApB,CAFV,EAICC,OAAO;;AAEH,8BAAM,IAAIC,KAAJ,CAAU,0DAAV,CAAN;AACH,qBAPF,CAAP;AASH;;AAEKG,yCAAN,GAAkC;AAAA;;AAAA;;AAE9B,4BAAI;;AAGA,gCAAIC,UAAU,MAAMC,QAAQC,GAAR,CAAY,CAC5B,MAAKjB,wBAAL,EAD4B,EAE5B,MAAKY,gCAAL,EAF4B,EAG5B,MAAKC,iCAAL,EAH4B,CAAZ,CAApB;;AAMA,mCAAOE,QACFG,MADE,CACK,UAACC,SAAD,EAAYC,IAAZ;AAAA,uCAAqBD,UAAUE,MAAV,CAAiBD,IAAjB,CAArB;AAAA,6BADL,EACkD,EADlD,EAEFE,IAFE,CAEG,UAACC,CAAD,EAAIC,CAAJ;AAAA,uCAAUA,EAAEjB,IAAF,CAAOkB,OAAP,KAAmBF,EAAEhB,IAAF,CAAOkB,OAAP,EAA7B;AAAA,6BAFH,CAAP;AAGH,yBAZD,CAaA,OAAMf,GAAN,EAAW;;AAEPgB,oCAAQC,GAAR,CAAYjB,GAAZ;;AAEA,kCAAM,IAAIC,KAAJ,CAAU,kDAAV,CAAN;AACH;AApB6B;AAqBjC;AAnE0B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negociacao } from './Negociacao.js';\n\nexport class NegociacaoService {\n\n    constructor() {\n\n        this._http = new HttpService();\n    }\n\n    obtemNegociacoesDaSemana() {\n\n        return this._http.get('negociacoes/semana')\n            .then(\n                dados => dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                ,\n                err => {\n\n                    throw new Error('Não foi possível obter as negociações');\n                }\n            );\n    }\n\n    obtemNegociacoesDaSemanaAnterior() {\n\n        return this._http.get('negociacoes/anterior')\n            .then(\n                dados => dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                ,\n                err => {\n\n                    throw new Error('Não foi possível obter as negociações da semana anterior');\n                }\n            );\n    }\n\n    obtemNegociacoesDaSemanaRetrasada() {\n\n        return this._http.get('negociacoes/retrasada')\n            .then(\n                dados => dados.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor))\n                ,\n                err => {\n\n                    throw new Error('Não foi possível obter as negociações da semana anterior');\n                }\n            );\n    }\n\n    async obtemNegociacoesDoPeriodo() {\n\n        try {\n\n\n            let periodo = await Promise.all([\n                this.obtemNegociacoesDaSemana(),\n                this.obtemNegociacoesDaSemanaAnterior(),\n                this.obtemNegociacoesDaSemanaRetrasada()\n            ]);\n\n            return periodo\n                .reduce((novoArray, item) => novoArray.concat(item), [])\n                .sort((a, b) => b.data.getTime() - a.data.getTime());\n        }\n        catch(err) {\n\n            console.log(err);\n\n            throw new Error('Não foi possível obter as negociações do período');\n        }\n    }\n}   "]}